# 前后端集成测试指南

## 🎯 测试目标

验证前端与后端 API 的完整集成，确保所有功能正常工作。

---

## 📋 前置条件

### 1. 启动后端服务

```bash
cd ../backend
python main.py
```

验证后端运行:
- 访问 http://localhost:8000
- 应该看到: `{"message":"待办事项 API 服务正常运行","version":"1.0.0"}`

### 2. 启动前端服务

```bash
cd frontend
npm install
npm run dev
```

验证前端运行:
- 访问 http://localhost:3000
- 应该看到待办事项应用界面

---

## ✅ 功能测试清单

### 测试 1: 页面加载

- [ ] 页面成功加载，无控制台错误
- [ ] 显示"我的待办事项"标题
- [ ] 显示输入框和添加按钮
- [ ] 显示筛选按钮（全部/未完成/已完成）
- [ ] 显示底部操作按钮

**预期结果**: 页面完整显示，无错误

---

### 测试 2: 添加任务

#### 步骤：
1. 在输入框输入"测试任务1"
2. 点击"添加"按钮

#### 验证：
- [ ] 任务成功添加到列表顶部
- [ ] 输入框自动清空
- [ ] 任务显示未完成状态（无划线）
- [ ] 总任务数增加

**预期结果**: 任务成功创建并显示

#### 测试数据：
```
- "测试任务1"
- "学习 React"
- "完成文档"
- "代码审查"
```

---

### 测试 3: 标记任务完成

#### 方式 1: 点击圆形复选框

#### 步骤：
1. 点击任务前的圆形图标

#### 验证：
- [ ] 圆形图标变为蓝色并显示✓
- [ ] 任务文字显示划线
- [ ] 任务整体变为半透明

**预期结果**: 任务状态切换为完成

#### 方式 2: 点击完成按钮

#### 步骤：
1. 鼠标悬停在任务上
2. 点击"完成"按钮

#### 验证：
- [ ] 按钮文字变为"取消完成"
- [ ] 任务标记为完成状态
- [ ] 样式正确更新

**预期结果**: 任务状态切换为完成

---

### 测试 4: 取消完成

#### 步骤：
1. 点击已完成任务的圆形图标或"取消完成"按钮

#### 验证：
- [ ] 任务状态变回未完成
- [ ] 划线效果消失
- [ ] 不透明度恢复正常

**预期结果**: 任务状态切换为未完成

---

### 测试 5: 删除任务

#### 步骤：
1. 鼠标悬停在任务上
2. 点击"删除"按钮
3. 在弹出的确认对话框点击"确定"

#### 验证：
- [ ] 显示确认对话框
- [ ] 点击确定后任务从列表消失
- [ ] 总任务数减少
- [ ] 页面无错误

**预期结果**: 任务成功删除

---

### 测试 6: 筛选功能

#### 测试 6.1: 全部任务

#### 步骤：
1. 点击"全部"按钮

#### 验证：
- [ ] "全部"按钮高亮显示
- [ ] 显示所有任务（已完成 + 未完成）

#### 测试 6.2: 未完成任务

#### 步骤：
1. 点击"未完成"按钮

#### 验证：
- [ ] "未完成"按钮高亮显示
- [ ] 只显示未完成的任务
- [ ] 已完成任务被隐藏

#### 测试 6.3: 已完成任务

#### 步骤：
1. 点击"已完成"按钮

#### 验证：
- [ ] "已完成"按钮高亮显示
- [ ] 只显示已完成的任务
- [ ] 未完成任务被隐藏

**预期结果**: 筛选功能正常工作

---

### 测试 7: 清除已完成

#### 准备：
1. 创建 3 个任务
2. 标记其中 2 个为完成

#### 步骤：
1. 点击"清除已完成"按钮
2. 在确认对话框点击"确定"

#### 验证：
- [ ] 显示确认对话框
- [ ] 所有已完成任务被删除
- [ ] 未完成任务保留
- [ ] 任务总数正确更新

**预期结果**: 已完成任务全部清除

---

### 测试 8: 清空所有

#### 准备：
1. 列表中有多个任务

#### 步骤：
1. 点击"清空所有"按钮
2. 在确认对话框点击"确定"

#### 验证：
- [ ] 显示确认对话框
- [ ] 所有任务被删除
- [ ] 显示空状态提示
- [ ] 任务总数为 0

**预期结果**: 所有任务清空

---

### 测试 9: 空状态

#### 步骤：
1. 清空所有任务
2. 观察空状态提示

#### 验证：
- [ ] 显示"暂无任务，添加一个开始吧！"
- [ ] 样式美观
- [ ] 无控制台错误

**预期结果**: 空状态正确显示

---

### 测试 10: 网络请求

#### 使用浏览器开发工具

#### 步骤：
1. 打开浏览器开发者工具 (F12)
2. 切换到 Network 标签
3. 执行各种操作

#### 验证 API 调用：

**获取任务列表**
- [ ] URL: `/api/todos` 或 `/api/todos?filter=active`
- [ ] 方法: GET
- [ ] 状态码: 200
- [ ] 响应: JSON 数组

**创建任务**
- [ ] URL: `/api/todos`
- [ ] 方法: POST
- [ ] 请求体: `{"text":"任务内容"}`
- [ ] 状态码: 201
- [ ] 响应: 包含 id 的任务对象

**更新任务**
- [ ] URL: `/api/todos/{id}`
- [ ] 方法: PUT
- [ ] 请求体: `{"completed":true}` 或 `{"completed":false}`
- [ ] 状态码: 200

**删除任务**
- [ ] URL: `/api/todos/{id}`
- [ ] 方法: DELETE
- [ ] 状态码: 200

**清除已完成**
- [ ] URL: `/api/todos/clear/completed`
- [ ] 方法: DELETE
- [ ] 状态码: 200

**清空所有**
- [ ] URL: `/api/todos/clear/all`
- [ ] 方法: DELETE
- [ ] 状态码: 200

**预期结果**: 所有 API 请求成功，状态码正确

---

### 测试 11: 错误处理

#### 测试 11.1: 后端服务停止

#### 步骤：
1. 停止后端服务
2. 尝试添加任务

#### 验证：
- [ ] 显示错误提示
- [ ] 提示检查后端服务
- [ ] 应用不崩溃

**预期结果**: 错误处理正确

#### 测试 11.2: 网络延迟

#### 步骤：
1. 使用浏览器开发工具限制网络速度
2. 执行操作

#### 验证：
- [ ] 显示 loading 状态
- [ ] 操作完成后正常显示结果

**预期结果**: Loading 状态正确显示

---

### 测试 12: 用户体验

#### 12.1 动画效果

- [ ] 任务添加时有滑入动画
- [ ] 按钮悬停有抬升效果
- [ ] 任务项悬停有阴影变化

#### 12.2 交互反馈

- [ ] 按钮点击有视觉反馈
- [ ] 完成状态切换流畅
- [ ] 删除操作有确认

#### 12.3 响应式设计

- [ ] 在移动端正常显示
- [ ] 在平板正常显示
- [ ] 在桌面端正常显示

**预期结果**: 用户体验良好

---

### 测试 13: 数据持久化

#### 步骤：
1. 添加几个任务
2. 刷新页面 (F5)

#### 验证：
- [ ] 任务保留在列表中
- [ ] 完成状态保持
- [ ] 任务顺序正确

**预期结果**: 数据持久化正常

---

### 测试 14: 特殊情况

#### 14.1 空输入

#### 步骤：
1. 输入框留空
2. 点击添加

#### 验证：
- [ ] 任务不被创建
- [ ] 无错误提示

#### 14.2 超长文本

#### 步骤：
1. 输入很长的任务内容 (1000+ 字符)
2. 点击添加

#### 验证：
- [ ] 任务成功创建
- [ ] 文本正确显示，支持换行
- [ ] 无布局问题

#### 14.3 特殊字符

#### 步骤：
1. 输入特殊字符: `<script>alert('test')</script>` 😀 🎉
2. 点击添加

#### 验证：
- [ ] 任务成功创建
- [ ] 特殊字符被正确转义
- [ ] 无 XSS 漏洞
- [ ] Emoji 正确显示

**预期结果**: 特殊情况处理正确

---

## 🐛 常见问题

### 问题 1: CORS 错误

**症状**: 控制台显示 CORS policy 错误

**解决**: 
1. 确认后端 CORS 配置包含前端地址
2. 检查 Vite 代理配置

### 问题 2: 404 错误

**症状**: API 请求返回 404

**解决**:
1. 确认后端服务运行
2. 检查 API 路径是否正确
3. 查看后端日志

### 问题 3: 数据不刷新

**症状**: 操作后数据不更新

**解决**:
1. 检查是否调用了 `fetchTodos()`
2. 查看网络请求是否成功
3. 检查状态更新逻辑

---

## 📊 测试报告模板

```
测试日期: ____________________
测试人员: ____________________
测试环境: 
  - 操作系统: ____________________
  - 浏览器: ____________________
  - Node 版本: ____________________
  - Python 版本: ____________________

测试结果:
  - 通过: ____ / 14 项
  - 失败: ____ 项
  - 待修复: ____ 项

备注:
____________________________________
____________________________________
____________________________________
```

---

## ✅ 最终验收标准

### 核心功能 (必须全部通过)

- [ ] 添加任务
- [ ] 标记完成
- [ ] 取消完成
- [ ] 删除任务
- [ ] 筛选任务
- [ ] 清除已完成
- [ ] 清空所有

### 用户体验 (至少 80% 通过)

- [ ] 动画流畅
- [ ] 响应式设计
- [ ] 错误处理
- [ ] Loading 状态

### 数据正确性 (必须 100% 通过)

- [ ] 数据持久化
- [ ] 状态同步
- [ ] API 调用正确

---

## 🎉 测试通过后

恭喜！前后端集成测试完成！

### 下一步：

1. 记录测试结果
2. 修复发现的问题
3. 进行性能优化
4. 准备生产部署

---

**Happy Testing! 🚀**

